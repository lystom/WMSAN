<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>To noisi - WMSAN</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../assets/_mkdocstrings.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "To noisi";
        var mkdocs_page_input_path = "api_overview/wmsan_to_noisi.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../..">
          <img src="../../img/logowmsan.png" class="logo" alt="Logo"/>
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../getting_started/">Getting Started</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">API Overview</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../api_overview/">Index</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../read_hs_p2l/">Read WW3 Files</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../body_waves/">Body Waves</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../rayleigh_waves/">Rayleigh Waves</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../temporal_variations/">Temporal Variations</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../synthetics/">Synthetic Cross-Correlation Functions</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">To noisi</a>
    <ul class="current">
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">User Guide</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../user_guide/">Tutorials</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Site Effect</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../notebooks/rayleigh_waves/amplification_coeff/">Rayleigh Waves Site Effect</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../notebooks/body_waves/amplification_coeff/">Body Waves Site Effect</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Equivalent Vertical Force Maps</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../notebooks/rayleigh_waves/microseismic_sources/">Rayleigh Waves Equivalent Vertical Force</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../notebooks/body_waves/microseismic_sources/">Body Waves Equivalent Vertical Force</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../notebooks/rayleigh_waves/temporal_variations/">Rayleigh Waves Temporal Variations</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Synthetic Cross-Correlation Functions</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../notebooks/rayleigh_waves/synthetic_CCF/">Rayleigh Waves Synthetic Cross-correlation Functions</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../notebooks/body_waves/synthetic_CCF/">Body Waves Synthetics Cross-correlation Functions</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../notebooks/rayleigh_waves/wmsan_to_noisi/">WMSAN to noisi</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Synthetic Spectrograms</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../notebooks/rayleigh_waves/rayleigh_source/">Rayleigh Waves Power Spectrum of Vertical Displacement</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../notebooks/rayleigh_waves/spectrograms/">Rayleigh Waves Synthetic Spectrograms</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Developer Guide</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../developer_guide/">How to contribute ?</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">About</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../about/">About</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">WMSAN</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">API Overview</li>
      <li class="breadcrumb-item active">To noisi</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h2 id="wmsan-to-noisi">WMSAN to noisi</h2>


<div class="doc doc-object doc-module">



<a id="wmsan.wmsan_to_noisi"></a>
    <div class="doc doc-contents first">

      <p>Functions to convert WMSAN data to Noisi source distribution starting file format. </p>
<p>It contains five functions:</p>
<ul>
<li>
<p><code>create_sourcegrid_WW3(lat_min, lat_max, lon_min, lon_max, output_path)</code>: Create a grid of latitude and longitude values within the specified range and save it as a NumPy array.</p>
</li>
<li>
<p><code>get_nearest_neighbour_index(tree, query_point, n)</code>: Get the indices of the nearest neighbors to a given query point using a ball tree.</p>
</li>
<li>
<p><code>get_nearest_neighbour(latlon_target, latlon_input, values, leaf_size=30)</code>: Get the nearest neighbors to a given query point using a ball tree.</p>
</li>
<li>
<p><code>get_approx_surface_elements(lon)</code>: Returns an array of ones with the same length as the input array <code>lon</code>, representing an approximation of surface elements.</p>
</li>
<li>
<p><code>run(noise_source_file, grid_file, greens_function_file)</code>: Runs the computation to generate the secondary microseismic source distribution for noisi, given noise source file, grid file, and greens function file.</p>
</li>
</ul>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="wmsan.wmsan_to_noisi.create_sourcegrid_WW3" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_sourcegrid_WW3</span><span class="p">(</span><span class="n">lat_min</span><span class="p">,</span> <span class="n">lat_max</span><span class="p">,</span> <span class="n">lon_min</span><span class="p">,</span> <span class="n">lon_max</span><span class="p">,</span> <span class="n">output_path</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

      <p>Create a grid of latitude and longitude values within the specified range and save it as a NumPy array.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>lat_min</code></b>
                  (<code>float</code>)
              –
              <div class="doc-md-description">
                <p>The minimum value of the latitude range.</p>
              </div>
            </li>
            <li>
              <b><code>lat_max</code></b>
                  (<code>float</code>)
              –
              <div class="doc-md-description">
                <p>The maximum value of the latitude range.</p>
              </div>
            </li>
            <li>
              <b><code>lon_min</code></b>
                  (<code>float</code>)
              –
              <div class="doc-md-description">
                <p>The minimum value of the longitude range.</p>
              </div>
            </li>
            <li>
              <b><code>lon_max</code></b>
                  (<code>float</code>)
              –
              <div class="doc-md-description">
                <p>The maximum value of the longitude range.</p>
              </div>
            </li>
            <li>
              <b><code>output_path</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>The path to the directory where the grid will be saved.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
<b><code>None</code></b>(                  <code>NoneType</code>
)              –
              <div class="doc-md-description">
                <p>The function saves the grid as a NumPy array in the specified path.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wmsan/wmsan_to_noisi.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">create_sourcegrid_WW3</span><span class="p">(</span><span class="n">lat_min</span><span class="p">,</span> <span class="n">lat_max</span><span class="p">,</span> <span class="n">lon_min</span><span class="p">,</span> <span class="n">lon_max</span><span class="p">,</span> <span class="n">output_path</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a grid of latitude and longitude values within the specified range and save it as a NumPy array.</span>

<span class="sd">    Args:</span>
<span class="sd">        lat_min (float): The minimum value of the latitude range.</span>
<span class="sd">        lat_max (float): The maximum value of the latitude range.</span>
<span class="sd">        lon_min (float): The minimum value of the longitude range.</span>
<span class="sd">        lon_max (float): The maximum value of the longitude range.</span>
<span class="sd">        output_path (str): The path to the directory where the grid will be saved.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None (NoneType): The function saves the grid as a NumPy array in the specified path.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">lon</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">lon_min</span><span class="p">,</span> <span class="n">lon_max</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
    <span class="n">lat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">lat_min</span><span class="p">,</span> <span class="n">lat_max</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
    <span class="n">xx</span><span class="p">,</span> <span class="n">yy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">)</span>
    <span class="n">xx</span> <span class="o">=</span> <span class="n">xx</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">yy</span> <span class="o">=</span> <span class="n">yy</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">np</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">output_path</span> <span class="o">+</span> <span class="s1">&#39;sourcegrid.npy&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">xx</span><span class="p">,</span> <span class="n">yy</span><span class="p">]))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="wmsan.wmsan_to_noisi.geo_nearest_neighbour" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">geo_nearest_neighbour</span><span class="p">(</span><span class="n">latlon_target</span><span class="p">,</span> <span class="n">latlon_input</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">leaf_size</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

      <p>Find the nearest neighbors in a grid of latitude and longitude coordinates.
This function takes in a target set of latitude and longitude coordinates, an input set of latitude and longitude coordinates, and a set of values associated with the input coordinates. It uses a BallTree to efficiently find the nearest neighbor in the input set for each point in the target set. The function returns an array of values corresponding to the nearest neighbors.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>latlon_target</code></b>
                  (<code>tuple of arrays</code>)
              –
              <div class="doc-md-description">
                <p>The target set of latitude and longitude coordinates.</p>
              </div>
            </li>
            <li>
              <b><code>latlon_input</code></b>
                  (<code>tuple of arrays</code>)
              –
              <div class="doc-md-description">
                <p>The input set of latitude and longitude coordinates.</p>
              </div>
            </li>
            <li>
              <b><code>values</code></b>
                  (<code>array - like</code>)
              –
              <div class="doc-md-description">
                <p>The set of values associated with the input coordinates.</p>
              </div>
            </li>
            <li>
              <b><code>leaf_size</code></b>
                  (<code>int</code>, default:
                      <code>30</code>
)
              –
              <div class="doc-md-description">
                <p>The number of points to group together in the BallTree. Defaults to 30.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
<b><code>values_out</code></b>(                  <code>array - like</code>
)              –
              <div class="doc-md-description">
                <p>An array of values corresponding to the nearest neighbors.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wmsan/wmsan_to_noisi.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">geo_nearest_neighbour</span><span class="p">(</span><span class="n">latlon_target</span><span class="p">,</span> <span class="n">latlon_input</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">leaf_size</span><span class="o">=</span><span class="mi">30</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Find the nearest neighbors in a grid of latitude and longitude coordinates.</span>
<span class="sd">    This function takes in a target set of latitude and longitude coordinates, an input set of latitude and longitude coordinates, and a set of values associated with the input coordinates. It uses a BallTree to efficiently find the nearest neighbor in the input set for each point in the target set. The function returns an array of values corresponding to the nearest neighbors.</span>

<span class="sd">    Args:</span>
<span class="sd">        latlon_target (tuple of arrays): The target set of latitude and longitude coordinates.</span>
<span class="sd">        latlon_input (tuple of arrays): The input set of latitude and longitude coordinates.</span>
<span class="sd">        values (array-like): The set of values associated with the input coordinates.</span>
<span class="sd">        leaf_size (int, optional): The number of points to group together in the BallTree. Defaults to 30.</span>

<span class="sd">    Returns:</span>
<span class="sd">        values_out (array-like): An array of values corresponding to the nearest neighbors.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">lat_in</span> <span class="o">=</span> <span class="n">latlon_input</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">lon_in</span> <span class="o">=</span> <span class="n">latlon_input</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

    <span class="c1"># transform into convenient array </span>
    <span class="c1"># Create a meshgrid for x and y coordinates</span>
    <span class="n">latlat</span><span class="p">,</span> <span class="n">lonlon</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">lat_in</span><span class="p">,</span> <span class="n">lon_in</span><span class="p">,</span> <span class="n">indexing</span><span class="o">=</span><span class="s1">&#39;ij&#39;</span><span class="p">)</span>

    <span class="c1"># Flatten the arrays</span>
    <span class="n">lat_flat</span> <span class="o">=</span> <span class="n">latlat</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">lon_flat</span> <span class="o">=</span> <span class="n">lonlon</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">data_flat</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>

    <span class="n">lat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">lat_flat</span><span class="p">)</span>
    <span class="n">lon</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">lon_flat</span><span class="p">)</span>
    <span class="n">grid_in</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">])</span><span class="o">.</span><span class="n">T</span>

    <span class="c1"># construct a ball tree with haversine distance as the metric</span>
    <span class="n">tree</span> <span class="o">=</span> <span class="n">BallTree</span><span class="p">(</span><span class="n">grid_in</span><span class="p">,</span> <span class="n">leaf_size</span><span class="o">=</span><span class="n">leaf_size</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;haversine&#39;</span><span class="p">)</span>
    <span class="n">values_out</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">latlon_target</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">ix</span><span class="p">,</span> <span class="n">query_point</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">latlon_target</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="p">):</span>
        <span class="n">pt</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">query_point</span><span class="p">)</span>
        <span class="n">distance</span><span class="p">,</span> <span class="n">index</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">query</span><span class="p">([</span><span class="n">pt</span><span class="p">],</span> <span class="n">k</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">value_nearest</span> <span class="o">=</span> <span class="n">data_flat</span><span class="p">[</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]]</span>
        <span class="n">values_out</span><span class="p">[</span><span class="n">ix</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_nearest</span>
    <span class="k">return</span><span class="p">(</span><span class="n">values_out</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="wmsan.wmsan_to_noisi.get_approx_surface_elements" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_approx_surface_elements</span><span class="p">(</span><span class="n">lon</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

      <p>Returns an array of ones with the same length as the input array <code>lon</code>, representing an approximation of surface elements.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>lon</code></b>
                  (<code>array - like</code>)
              –
              <div class="doc-md-description">
                <p>An array-like object of longitude coordinates.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
<b><code>surfel</code></b>(                  <code><span title="numpy.ndarray">ndarray</span></code>
)              –
              <div class="doc-md-description">
                <p>A 1D array of ones with the same length as <code>lon</code>.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wmsan/wmsan_to_noisi.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_approx_surface_elements</span><span class="p">(</span><span class="n">lon</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns an array of ones with the same length as the input array `lon`, representing an approximation of surface elements.</span>

<span class="sd">    Args:</span>
<span class="sd">        lon (array-like): An array-like object of longitude coordinates.</span>

<span class="sd">    Returns:</span>
<span class="sd">        surfel (numpy.ndarray): A 1D array of ones with the same length as `lon`.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">surfel</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">lon</span><span class="p">))</span>
    <span class="c1"># set to 1 to suppress multiplication by surface element ==&gt; (LISA) done by muting  35_000 ** 2</span>

    <span class="k">return</span><span class="p">(</span><span class="n">surfel</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="wmsan.wmsan_to_noisi.get_nearest_neighbour_index" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_nearest_neighbour_index</span><span class="p">(</span><span class="n">tree</span><span class="p">,</span> <span class="n">query_point</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

      <p>Get the indices of the nearest neighbors to a given query point using a ball tree.
This function uses a ball tree to find the indices of the nearest neighbors to a given query point. It takes a ball tree object, a query point, and the number of nearest neighbors to find as input. It then queries the ball tree to find the distances and indices of the nearest neighbors to the query point. The function returns an array of indices of the nearest neighbors.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>tree</code></b>
                  (<code><span title="sklearn.neighbors.BallTree">BallTree</span></code>)
              –
              <div class="doc-md-description">
                <p>The ball tree object used for nearest neighbor search.</p>
              </div>
            </li>
            <li>
              <b><code>query_point</code></b>
                  (<code>array - like</code>)
              –
              <div class="doc-md-description">
                <p>The query point for which to find the nearest neighbors.</p>
              </div>
            </li>
            <li>
              <b><code>n</code></b>
                  (<code>int</code>)
              –
              <div class="doc-md-description">
                <p>The number of nearest neighbors to find.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
<b><code>values_out</code></b>(                  <code>array - like</code>
)              –
              <div class="doc-md-description">
                <p>An array of indices of the nearest neighbors.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wmsan/wmsan_to_noisi.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_nearest_neighbour_index</span><span class="p">(</span><span class="n">tree</span><span class="p">,</span> <span class="n">query_point</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the indices of the nearest neighbors to a given query point using a ball tree.</span>
<span class="sd">    This function uses a ball tree to find the indices of the nearest neighbors to a given query point. It takes a ball tree object, a query point, and the number of nearest neighbors to find as input. It then queries the ball tree to find the distances and indices of the nearest neighbors to the query point. The function returns an array of indices of the nearest neighbors.</span>

<span class="sd">    Args:</span>
<span class="sd">        tree (BallTree): The ball tree object used for nearest neighbor search.</span>
<span class="sd">        query_point (array-like): The query point for which to find the nearest neighbors.</span>
<span class="sd">        n (int): The number of nearest neighbors to find.</span>

<span class="sd">    Returns:</span>
<span class="sd">        values_out (array-like): An array of indices of the nearest neighbors.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">distances</span><span class="p">,</span> <span class="n">indices</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">query</span><span class="p">([</span><span class="n">pt</span><span class="p">],</span> <span class="n">k</span><span class="o">=</span><span class="n">n</span><span class="p">)</span>
    <span class="k">return</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="wmsan.wmsan_to_noisi.run" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run</span><span class="p">(</span><span class="n">noise_source_file</span><span class="p">,</span> <span class="n">grid_file</span><span class="p">,</span> <span class="n">greens_function_file</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

      <p>Runs the computation to generate the WMSAN to NOISI secondary microseismic source distribution for the given noise source file, grid file, and greens function file.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>noise_source_file</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>The path to the noise source file in N.s^{1/2}.</p>
              </div>
            </li>
            <li>
              <b><code>grid_file</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>The path to the grid file.</p>
              </div>
            </li>
            <li>
              <b><code>greens_function_file</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>The path to the greens function file.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
<b><code>None</code></b>(                  <code>NoneType</code>
)              –
              <div class="doc-md-description">
                <p>This function does not return anything.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wmsan/wmsan_to_noisi.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">noise_source_file</span><span class="p">,</span> <span class="n">grid_file</span><span class="p">,</span> <span class="n">greens_function_file</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Runs the computation to generate the WMSAN to NOISI secondary microseismic source distribution for the given noise source file, grid file, and greens function file.</span>

<span class="sd">    Args:</span>
<span class="sd">        noise_source_file (str): The path to the noise source file in N.s^{1/2}.</span>
<span class="sd">        grid_file (str): The path to the grid file.</span>
<span class="sd">        greens_function_file (str): The path to the greens function file.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None (NoneType): This function does not return anything.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fmin</span> <span class="o">=</span> <span class="mf">0.0</span>    
    <span class="n">microseism_model</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="n">noise_source_file</span><span class="p">)</span>
    <span class="n">microseism_model</span> <span class="o">=</span> <span class="n">microseism_model</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
    <span class="n">source_grid</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">grid_file</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="n">microseism_model</span><span class="p">)</span>

    <span class="n">n_basis</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">microseism_model</span><span class="p">[</span><span class="s2">&quot;frequency&quot;</span><span class="p">])</span>
    <span class="c1"># here we use n_basis gaussians to make life simpler</span>
    <span class="c1"># frequency axis of the simulation</span>
    <span class="k">with</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="n">greens_function_file</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">wf</span><span class="p">:</span>
        <span class="n">sampling_rate</span> <span class="o">=</span> <span class="n">wf</span><span class="p">[</span><span class="s2">&quot;stats&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;Fs&quot;</span><span class="p">]</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">next_fast_len</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">wf</span><span class="p">[</span><span class="s2">&quot;stats&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;nt&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">freqs_new</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fft</span><span class="o">.</span><span class="n">rfftfreq</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="mf">1.</span> <span class="o">/</span> <span class="n">sampling_rate</span><span class="p">)</span>
    <span class="n">freqs_source</span> <span class="o">=</span> <span class="n">microseism_model</span><span class="o">.</span><span class="n">frequency</span><span class="o">.</span><span class="n">values</span>

    <span class="c1"># define arrays</span>
    <span class="n">spect_basis</span> <span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">n_basis</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">freqs_new</span><span class="p">)),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="c1"># # coefficient matrix</span>
    <span class="n">n_loc</span> <span class="o">=</span> <span class="n">source_grid</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">mod</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">n_loc</span><span class="p">,</span> <span class="n">n_basis</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>

    <span class="c1"># loop over (sparsely sampled) source model frequencies</span>
    <span class="k">for</span> <span class="n">ixf</span><span class="p">,</span> <span class="n">ff</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">freqs_source</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Frequency </span><span class="si">{</span><span class="n">ixf</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2"> of </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">freqs_source</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># define the basis function</span>
        <span class="k">if</span> <span class="n">ixf</span> <span class="o">&lt;</span> <span class="n">n_basis</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">gauss_sigma</span> <span class="o">=</span> <span class="p">(</span><span class="n">freqs_source</span><span class="p">[</span><span class="n">ixf</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">ff</span><span class="p">)</span> <span class="o">/</span> <span class="mf">1.5</span>
        <span class="n">gaussian</span> <span class="o">=</span> <span class="mf">1.</span><span class="o">/</span><span class="p">(</span><span class="n">gauss_sigma</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mf">2.</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">))</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="mf">0.5</span> <span class="o">*</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">((</span><span class="n">freqs_new</span> <span class="o">-</span> <span class="n">ff</span><span class="p">)</span> <span class="o">/</span> <span class="n">gauss_sigma</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">))</span>

        <span class="n">spect_basis</span><span class="p">[</span><span class="n">ixf</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">gaussian</span>

        <span class="c1"># interpolate the map to the source grid</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="n">geo_nearest_neighbour</span><span class="p">([</span><span class="n">source_grid</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">source_grid</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span>
            <span class="p">[</span><span class="n">microseism_model</span><span class="o">.</span><span class="n">latitude</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">microseism_model</span><span class="o">.</span><span class="n">longitude</span><span class="o">.</span><span class="n">values</span><span class="p">],</span>
            <span class="n">microseism_model</span><span class="o">.</span><span class="n">F_f</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">frequency</span><span class="o">=</span><span class="n">ixf</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="o">/</span><span class="mf">1e6</span><span class="p">)</span> <span class="c1">## Values to the square and multiply by 1e12 to normalise by the square of the GF force (not sure)  </span>

        <span class="n">mod</span><span class="p">[:,</span> <span class="n">ixf</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">square</span><span class="p">(</span><span class="n">temp</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>

    <span class="c1"># Save to an hdf5 file</span>
    <span class="n">noise_source_output_file</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">&quot;nc&quot;</span><span class="p">,</span> <span class="s2">&quot;h5&quot;</span><span class="p">,</span> <span class="n">noise_source_file</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="n">noise_source_output_file</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fh</span><span class="p">:</span>
        <span class="n">fh</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;coordinates&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">grid_file</span><span class="p">))</span>
        <span class="n">fh</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;frequencies&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">freqs_new</span><span class="p">)</span>
        <span class="n">fh</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;surface_areas&#39;</span><span class="p">,</span>
                          <span class="n">data</span><span class="o">=</span><span class="n">get_approx_surface_elements</span><span class="p">(</span><span class="n">source_grid</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="n">fh</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s2">&quot;spectral_basis&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">spect_basis</span><span class="p">)</span>
        <span class="n">fh</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s2">&quot;model&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">mod</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../synthetics/" class="btn btn-neutral float-left" title="Synthetic Cross-Correlation Functions"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../../user_guide/" class="btn btn-neutral float-right" title="Tutorials">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://gricad-gitlab.univ-grenoble-alpes.fr/tomasetl/ww3-source-maps" class="icon icon-gitlab" style="color: #fcfcfc"> GitLab</a>
        </span>
    
    
      <span><a href="../synthetics/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../../user_guide/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
